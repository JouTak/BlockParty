# BlockParty
BlockParty for ITMOCraft Spartakiada (19.04.2025)

## Команды

| Команда        | Параметры                           | Описание                                                |
|----------------|-------------------------------------|---------------------------------------------------------|
| `/bp create`   | name, world, x1, y1, z1, x2, y2, z2 | Добавить арену в заданном мире по координатам           |
| `/bp config`   | key, value                          | Изменить значение в конфиге                             |
| `/bp config`   | key                                 | Посмотреть текущее значение                             |
| `/bp remove`   | name                                | Удалить арену с данным именем                           |
| `/bp list`     |                                     | Вывести список имен всех существующих арен              |
| `/bp info`     | name                                | Вывести информацию об арене с данным именем             |
| `/bp ready`    |                                     | Встать в очередь/выйти из очереди на BlockParty         |
| `/bp spectate` | name                                | Наблюдать за ареной с данным именем                     |
| `/bp spectate` |                                     | Выйти из режима наблюдателя (телепортироваться в лобби) |

## Конфиг

| Ключ                           | За что отвечает                                  | Тип     |
|--------------------------------|--------------------------------------------------|---------|
| **LOBBY_WORLD_NAME**           | Название мира с лобби                            | String  |
| **LOG_INFO_TO_CONSOLE**        | Выводить информацию по каждой игре в консоль     | Boolean |
| **MAX_PLAYERS_IN_GAME**        | Макс. кол-во игроков в одной игре                | Int     |
| **MAX_ROUND_TIME**             | Макс. время в раунде (в сек.)                    | Int     |
| **MIN_ROUND_TIME**             | Мин. время в раунде (в сек.)                     | Int     |
| **NUMBER_OF_FLOORS**           | Кол-во платформ в мире `bp_floors`               | Int     |
| **NUMBER_OF_SNOWBALLS_ON_PVP** | Кол-во выдаваемых снежков в режиме PvP           | Int     |
| **PLAYERS_TO_START**           | Мин. кол-во игроков для начала игры              | Int     |
| **PLAYERS_TO_END**             | Кол-во игроков для завершения игры               | Int     |
| **ROUND_TO_START_PVP**         | Номер раунда, с которого будут выдаваться снежки | Int     |
| **SPARTAKIADA_MODE**           | Переключение режима спартакиады                  | Boolean |
| **SPARTAKIADA_ATTEMPTS**       | Кол-во попыток в режиме спартакиады              | Int     |
| **TIME_BETWEEN_ROUNDS**        | Время между раундами (в сек.)                    | Int     |
| **TIME_TO_START_GAME_LOBBY**   | Время отсчета в лобби до начала игры (в сек.)    | Int     |

> [!TIP]
> Для того, чтобы изменить значения конфига, достаточно в игре прописать команду `/bp config <key> <value>`, где <br/>
> **key** - название константы, которую вы хотите поменять <br/>
> **value** - значение, которое вы хотите подставить

## Доступ к командам

| Название                 | Доступ                                         |
|--------------------------|------------------------------------------------|
| **blockparty.spectator** | Доступ к /bp spectate для наблюдения за играми |
| **blockparty.admin**     | Полный доступ ко всем командам плагина         |

> [!TIP]
> Для выдачи доступов можно использовать плагин LuckPerms, используя следующую команду:<br/>
> ``/lp user <nickname> permission set <permission>`` <br/>
> **nickname** - ник игрока, которому дается доступ <br/>
> **permission** - название доступа

## Режим Спартакиады

После включения данного режима только определенные игроки могут играть в мини-игру, при чем с ограничением кол-ва
попыток.
Список игроков, которые допускается к игре указан в папке плагина в файле `participants.yml` (любые обновления файла
сразу подхватываются на сервере, поэтому в процессе проведения спартакиады есть возможность предоставить доступ новым
игрокам). <br/>

> [!IMPORTANT]
> Лучше заранее закинуть готовый файл с участниками в папку плагина, чтобы избежать казусов.
> Пример структуры файла можно посмотреть в исходном коде в папке `resources`. <br/>
> P. S. У игроков с повышенными полномочиями (blockparty.spectator, blockparty.admin, op) доступ к серверу не
> ограничен (по идеи), но лучше не рисковать.

Все последующие файлы, связанные с проведением спартакиады, лежат в директории `spartakiada`. Подробная информация о
игроке лежит в папке `players` в отдельном файле, название которого соответствует нику игрока. Также ведется отдельный
файл `winners.yml`, в котором хранятся ники и UUID игроков, одержаших победу в одной из игр.
Информация о пройденных играх может быть найдена в папке `games`.

## Сборка плагина

1. Добавить проект из репозитория в **IntelliJ IDEA**
2. Нажать кнопку "**Run**" для сборки jar-файла\
   `[snapshot]` собирается в `plugins/` в папке _тестового_ сервера \
   `[release]` собирается в `build/` в папке проекта
